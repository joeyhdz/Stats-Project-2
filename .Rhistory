glimpse(df) # alot of categorical vars (factor encoding)
# for a look at a brief data description uncomment lines below:
#?glow_bonemed
#?glow500
# check for duplicated data
get_dupes(df, sub_id) # no duplicated data here which is what we'd like to see.
get_dupes(df, site_id) # makes sense that we would have duplicated study sites.
get_dupes(df, phy_id) # makes sense that we would have duplicated physician id codes.
# check for missing values
vis_miss(df) # great! No missing values.
library(GGally)
glimpse(df)
g <- df %>%
group_by(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))
g
g <- df %>%
group_by(fracture) %>%
mutate(perc=round(cnt/sum(cnt),4))
g <- df %>%
group_by(fracture) %>%
mutate(perc=round(cnt/sum(cnt),4))
g <- df %>%
group_by(fracture) %>%
summarise(cnt = n()) %>%
mutate(perc=round(cnt/sum(cnt),4))
g
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = T, stat = 'identity') +
ylab('Proportion of Fracture')
library(ggplot2)
g
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = T, stat = 'identity') +
ylab('Proportion of Fracture')
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture')
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture")
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") + geom_text(aes(label = perc), vjust = -.5, size = 5)
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") + geom_text(aes(label = perc), vjust = 2, size = 5)
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") +
geom_text(aes(label = perc), vjust = 2, size = 5, color = 'black')
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") +
geom_text(aes(label = perc * 100), vjust = 2, size = 5, color = 'black')
geom_text(aes(label = cat(perc * 100,"%\n"), vjust = 2, size = 5, color = 'black')
geom_text(aes(label = cat(perc * 100,"%\\"), vjust = 2, size = 5, color = 'black')
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
geom_text(aes(label = paste0(perc *100, "%" ), vjust = 2, size = 5, color = 'black')
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") +
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") +
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
glimpse(df)
g2 <- df %>%
group_by(fracture, premeno) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g2
g2 <- df %>%
group_by(fracture, premeno) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g2
ggplot(g2[c(2,3),], aes(x = reorder(premeno, -perc), y = perc, colour = premeno))+
geom_bar(aes(fill = premeno), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Menopause before age 45')
g3 <- df %>%
group_by(fracture, smoke) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(smoke, -perc), y = perc, colour = smoke))+
geom_bar(aes(fill = smoke), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Former or Current Smoker')
g3 <- df %>%
group_by(fracture, armassist) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(armassist, -perc), y = perc, colour = armassist))+
geom_bar(aes(fill = smoke), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Former or Current Smoker')
g3 <- df %>%
group_by(fracture, armassist) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(armassist, -perc), y = perc, colour = armassist))+
geom_bar(aes(fill = armassist), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Arm needed to stand from chair')
view(df)
df$bmi.cat <- ifelse(df$bmi < 18.5, "Underweight",
ifelse(df$bmi < 25, "Healthy weight",
ifelse(df$bmi < 30, "Overweight", "Obesity")))
# transforming numeric into categorical using widley accepted BMI categories
df$bmi.cat <- ifelse(df$bmi < 18.5, "Underweight",
ifelse(df$bmi < 25, "Healthy weight",
ifelse(df$bmi < 30, "Overweight", "Obesity")))
g4 <- df %>%
group_by(fracture, bmi.cat) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g4
ggplot(g4[c(2,3),], aes(x = reorder(bmi.cat, -perc), y = perc, colour = bmi.cat))+
geom_bar(aes(fill = bmi.cat), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('BMI Categories')
view(df)
library(ggplot2)
g <- df %>% # allows us to gather table of y/n fracture, the cnt, and percent.
group_by(fracture) %>%
summarise(cnt = n()) %>%
mutate(perc=round(cnt/sum(cnt),4))
g # shows the result of the above
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") +
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
g2 <- df %>%
group_by(fracture, premeno) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g2
ggplot(g2[c(2,3),], aes(x = reorder(premeno, -perc), y = perc, colour = premeno))+
geom_bar(aes(fill = premeno), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Menopause before age 45')
g3 <- df %>%
group_by(fracture, armassist) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(armassist, -perc), y = perc, colour = armassist))+
geom_bar(aes(fill = armassist), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Arm needed to stand from chair')
ggplot(g4[c(2,3,5,8),], aes(x = reorder(bmi.cat, -perc), y = perc, colour = bmi.cat))+
geom_bar(aes(fill = bmi.cat), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('BMI Categories')
# transforming numeric into categorical using widley accepted BMI categories
df$bmi.cat <- ifelse(df$bmi < 18.5, "Underweight",
ifelse(df$bmi < 25, "Healthy weight",
ifelse(df$bmi < 30, "Overweight", "Obesity")))
g4 <- df %>%
group_by(fracture, bmi.cat) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g4
ggplot(g4[c(2,3,5,8),], aes(x = reorder(bmi.cat, -perc), y = perc, colour = bmi.cat))+
geom_bar(aes(fill = bmi.cat), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('BMI Categories')
#install.packages('janitor')
#install.packages('aplore3')
library(aplore3) # for our dataset
library(tidyverse) # tools for viz/cleaning/etc
library(janitor) # tools for cleaning
library(visdat) # visualize our missing data
# adding dataset into df call.
df<- glow_bonemed
# looking at our data from afar
glimpse(df) # alot of categorical vars (factor encoding)
# for a look at a brief data description uncomment lines below:
#?glow_bonemed
#?glow500
# check for duplicated data
get_dupes(df, sub_id) # no duplicated data here which is what we'd like to see.
get_dupes(df, site_id) # makes sense that we would have duplicated study sites.
get_dupes(df, phy_id) # makes sense that we would have duplicated physician id codes.
# check for missing values
vis_miss(df) # great! No missing values.
library(ggplot2)
g <- df %>% # allows us to gather table of y/n fracture, the cnt, and percent.
group_by(fracture) %>%
summarise(cnt = n()) %>%
mutate(perc=round(cnt/sum(cnt),4))
g # shows the result of the above
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") +
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
g2 <- df %>%
group_by(fracture, premeno) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g2
ggplot(g2[c(2,3),], aes(x = reorder(premeno, -perc), y = perc, colour = premeno))+
geom_bar(aes(fill = premeno), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Menopause before age 45')+
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
g3 <- df %>%
group_by(fracture, armassist) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(armassist, -perc), y = perc, colour = armassist))+
geom_bar(aes(fill = armassist), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Arm needed to stand from chair')+
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
# transforming numeric into categorical using widley accepted BMI categories
df$bmi.cat <- ifelse(df$bmi < 18.5, "Underweight",
ifelse(df$bmi < 25, "Healthy weight",
ifelse(df$bmi < 30, "Overweight", "Obesity")))
g4 <- df %>%
group_by(fracture, bmi.cat) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g4
ggplot(g4[c(2,3,5,8),], aes(x = reorder(bmi.cat, -perc), y = perc, colour = bmi.cat))+
geom_bar(aes(fill = bmi.cat), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('BMI Categories')+
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
g2 <- df %>%
group_by(fracture, premeno) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g2
ggplot(g2[c(2,3),], aes(x = reorder(premeno, -perc), y = perc, colour = premeno))+
geom_bar(aes(fill = premeno), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Menopause before age 45')+
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
# for a look at a brief data description uncomment lines below:
?glow_bonemed
?glow500
summary(df)
df$fracture
df %>% ggplot(aes(x = weight, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1)
df$fracture.num <- ifelse(df$fracture == "Yes",1,0) # Yes = 1 | No = 0
df %>% ggplot(aes(x = weight, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1)
df %>% ggplot(aes(x = weight, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = age, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = age, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = age, y = fracture.num)) +
geom_point()+
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = height, y = fracture.num)) +
geom_point()+
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = fracscore, y = fracture.num)) +
geom_point()+
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
#install.packages('janitor')
#install.packages('aplore3')
library(aplore3) # for our dataset
library(tidyverse) # tools for viz/cleaning/etc
library(janitor) # tools for cleaning
library(visdat) # visualize our missing data
# adding dataset into df call.
df<- glow_bonemed
# looking at our data from afar
glimpse(df) # alot of categorical vars (factor encoding)
# for a look at a brief data description uncomment lines below:
#?glow_bonemed
#?glow500
# check for duplicated data
get_dupes(df, sub_id) # no duplicated data here which is what we'd like to see.
get_dupes(df, site_id) # makes sense that we would have duplicated study sites.
get_dupes(df, phy_id) # makes sense that we would have duplicated physician id codes.
# check for missing values
vis_miss(df) # great! No missing values.
# visualizing the summary of our data.
summary(df)
library(ggplot2)
g <- df %>% # allows us to gather table of y/n fracture, the cnt, and percent.
group_by(fracture) %>%
summarise(cnt = n()) %>%
mutate(perc=round(cnt/sum(cnt),4))
g # shows the result of the above
# bar plot visual of the above.
ggplot(g, aes(x = fracture, y = perc, colour = fracture)) +
geom_bar(aes(fill = fracture), show.legend = F, stat = 'identity') +
ylab('Proportion of Fracture') + xlab("Fracture") +
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
g2 <- df %>%
group_by(fracture, premeno) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g2
ggplot(g2[c(2,3),], aes(x = reorder(premeno, -perc), y = perc, colour = premeno))+
geom_bar(aes(fill = premeno), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Menopause before age 45')+
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
g3 <- df %>%
group_by(fracture, armassist) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(armassist, -perc), y = perc, colour = armassist))+
geom_bar(aes(fill = armassist), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('Arm needed to stand from chair')+
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
# transforming numeric into categorical using widley accepted BMI categories
df$bmi.cat <- ifelse(df$bmi < 18.5, "Underweight",
ifelse(df$bmi < 25, "Healthy weight",
ifelse(df$bmi < 30, "Overweight", "Obesity")))
g4 <- df %>%
group_by(fracture, bmi.cat) %>%
summarise(cnt=n()) %>%
mutate(perc=round(cnt/sum(cnt),4))%>%
arrange(desc(perc))
g4
ggplot(g4[c(2,3,5,8),], aes(x = reorder(bmi.cat, -perc), y = perc, colour = bmi.cat))+
geom_bar(aes(fill = bmi.cat), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab('BMI Categories')+
geom_text(aes(label = paste0(perc *100, "%")), vjust = 2, size = 5, color = 'black')
# numercial form of fracture
df$fracture.num <- ifelse(df$fracture == "Yes",1,0) # Yes = 1 | No = 0
df %>% ggplot(aes(x = weight, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = age, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = height, y = fracture.num)) +
geom_point()+
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = fracscore, y = fracture.num)) +
geom_point()+
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
glimpse(df)
g3 <- df %>%
group_by(fracture, momfrac) %>%
summarise(ctn=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g3 <- df %>%
group_by(fracture, momfrac) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g3
geom_bar(aes(fill = momfrac), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Mother had Hip fracture") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
ggplot(g3[c(2,3),], aes(x = reorder(momfrac, -perc), y = perc, color = momfrac)) +
geom_bar(aes(fill = momfrac), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Mother had Hip fracture") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
g4 <- df %>%
group_by(fracture, smoke) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g4
ggplot(g3[c(1,4),], aes(x = reorder(smoke, -perc), y = perc, color = smoke)) +
geom_bar(aes(fill = smoke), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Fomor or Current Smoker") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
g4 <- df %>%
group_by(fracture, smoke) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g4
ggplot(g3[c(1,4),], aes(x = reorder(smoke, -perc), y = perc, color = smoke)) +
geom_bar(aes(fill = smoke), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Fomor or Current Smoker") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
head(df)
g4 <- df %>%
group_by(fracture, smoke) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g4
ggplot(g4[c(1,4),], aes(x = reorder(smoke, -perc), y = perc, color = smoke)) +
geom_bar(aes(fill = smoke), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Fomor or Current Smoker") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
ggplot(g4[c(1,4),], aes(x = reorder(smoke, -perc), y = perc, color = smoke)) +
geom_bar(aes(fill = smoke), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Fomor or Current Smoker") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 1, size = 5, color = "black")
ggplot(g4[c(1,4),], aes(x = reorder(smoke, -perc), y = perc, color = smoke)) +
geom_bar(aes(fill = smoke), show.legend = F, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Fomor or Current Smoker") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 1, size = 5, color = "black")
g5 <- df %>%
group_by(fracture, raterisk) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g5
ggplot(g5[c(1,2,6),], aes(x = reorder(raterisk, -perc), y = perc, color = raterisk)) +
geom_bar(aes(fill = raterisk), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Mother had Hip fracture") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
g6 <- df %>%
group_by(fracture, bonemed) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g6
# for a look at a brief data description uncomment lines below:
?glow_bonemed
ggplot(g6[c(2,3),], aes(x = reorder(bonemed, -perc), y = perc, color = bonemed)) +
geom_bar(aes(fill = bonemed), show.legend = F, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Bone Medication at Enrollment") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
g7 <- df %>%
group_by(fracture, bonemed_fu) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g7
ggplot(g7[c(2,3),], aes(x = reorder(bonemed_fu, -perc), y = perc, color = bonemed_fu)) +
geom_bar(aes(fill = bonemed_fu), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Bone Medication at Follow-up") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
g3 <- df %>%
group_by(fracture, bonetreat) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(bonetreat, -perc), y = perc, color = bonetreat)) +
geom_bar(aes(fill = bonetreat), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("Treatment at Both Enrollment & Follow-up") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
g3 <- df %>%
group_by(fracture, priorfrac) %>%
summarise(cnt=n()) %>%
mutate(perc = round(cnt/sum(cnt),4)) %>%
arrange(desc(perc))
g3
ggplot(g3[c(2,3),], aes(x = reorder(priorfrac, -perc), y = perc, color = priorfrac)) +
geom_bar(aes(fill = priorfrac), show.legend = T, stat = 'identity') +
ylab('Proportion of Disease') +
xlab("History of Prior Fracture") +
geom_text(aes(label = paste0(perc * 100, "%")), vjust = 2, size = 5, color = "black")
df %>% ggplot(aes(x = site_id, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
df %>% ggplot(aes(x = phy_id, y = fracture.num)) +
geom_point() +
geom_smooth(method = "loess", size = 1) + ylim(-.2, 1.2)
